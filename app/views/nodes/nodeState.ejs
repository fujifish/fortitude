<div class="box-header bg-blue">
  <h3 class="box-title"><%= title %> State</h3>
    <div class="box-tools pull-right">
      <% if (editable) { %>
      <button class="btn btn-outline" id="btnSetModulesToState" title="Import / export modules" data-toggle="tooltip"><i class="fa fa-exchange"></i></button>
      <button class="btn btn-outline" id="btnAddModuleToState" title="Add Module" data-toggle="tooltip"><i class="fa fa-plus"></i></button>
      <button class="btn btn-outline" id="btnApplyState" title="Apply State" data-toggle="tooltip"><i class="fa fa-save"></i></button>
      <% } else { %>
      <button class="btn btn-outline" id="btnCopyCurrentToPlannedState" title="Set as Planned" data-toggle="tooltip"><i class="fa fa-clone"></i></button>
      <% } %>
    </div>
</div>
<div class="box-body bg-gray-light">
  <% if (states.length === 0) { %>
  <h5 class="text-uppercase text-gray">No Entries</h5>
  <% } else { %>
  <%
    function sortedIndexes(toSort) {
      var objAndIdx = [];
      for (var i = 0; i < toSort.length; i++) {
        objAndIdx[i] = [toSort[i], i];
      }
      objAndIdx.sort(function(left, right) {
        return left[0].name < right[0].name ? -1 : 1;
      });
      var sortedIndexes = [];
      for (var j = 0; j < objAndIdx.length; j++) {
        sortedIndexes.push(objAndIdx[j][1]);
      }
      return sortedIndexes;
    }
    sortedIndexes(states).forEach(function(i) {
      var state = states[i];
  %>
  <div class="info-box" style="position: relative" name="StateOfModuleInfoBox" data-index="<%= i %>">
    <span class="info-box-icon bg-light-blue-gradient">
      <!--<div style="line-height: 90px;">-->
        <!--<span class="info-box-text">-->
          <% if (state.state.start && state.state.start.data && state.state.start.data.started) { %>
          &nbsp;<i class="fa fa-play-circle"></i>&nbsp;
          <% } else { %>
          &nbsp;<i class="fa fa-stop-circle"></i>&nbsp;
          <% } %>
        <!--</span>-->
      <!--</div>-->
    </span>
    <div class="info-box-content">
      <span class="info-box-text"><b><%= state.name %></b></span>
      <span class="info-box-text"><%= state.version %></span>

      <div class="btn-group btn-group-sm" style="position: absolute; bottom: 4px;" data-index="<%= i %>">
        <% if (editable) { %>
        <button type="button" name="btnEditModuleInState" class="btn btn-default" data-index="<%= i %>" data-toggle="tooltip" title="Edit"><i class="fa fa-pencil"></i></button>
        <button type="button" name="btnRemoveModuleFromState" data-index="<%= i %>" class="btn btn-default" data-toggle="tooltip" title="Remove"><i class="fa fa-remove"></i></button>
        <% } else { %>
        <button type="button" name="btnViewModuleInState" class="btn btn-default" data-index="<%= i %>" data-toggle="tooltip" title="Details"><i class="fa fa-eye"></i></button>
        <% } %>
      </div>
    </div>
  </div>
  <% })} %>
</div>

