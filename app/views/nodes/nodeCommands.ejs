<div class="box-header">
  <h3 class="box-title">Commands</h3>
</div>
<div class="box-body">
  <ul class="timeline">
    <%
    function commandStatus(status) {
      status = status || 'none';
      var statusIcons = {
        'pending': {
          icon: 'fa-spinner fa-spin', color: 'bg-blue'
        },
        'error': {
          icon: 'fa-remove', color: 'bg-red'
        },
        'success': {
          icon: 'fa-check', color: 'bg-green'
        },
        'skipped': {
          icon: 'fa-circle-o', color: 'bg-aqua'
        },
        'none': {
          icon: '', color: 'text-muted'
        }
      };
      return statusIcons[status].icon + ' '  + statusIcons[status].color ;
    }

    for (var index = 0; index < commands.length; index++) {
      var command = commands[index];
      var time = new Date(Date.parse(command.created));
    %>

      <% if (index === 0) { %>
      <li class="time-label">
        <span class="bg-blue">Latest Command</span>
      </li>
      <% } else if (index === 1) { %>
      <li class="time-label">
        <span class="bg-blue">Previous Commands</span>
      </li>
      <% } %>

      <li>
        <i class="fa <%= commandStatus(command.status) %>"></i>
        <div class="timeline-item">
          <span class="time">
            <i class="fa fa-clock-o"></i> <%= time.getUTCDate() %>.<%= time.getUTCMonth() %>.<%= time.getUTCFullYear() %>, <%= time.getUTCHours() %>:<%= time.getUTCMinutes() %>
            <% if (command.status === 'pending') { %>
            <button class="btn btn-xs btn-default" style="margin-left: 4px;" name="btnCancelPendingCommand" data-toggle="tooltip" title="Cancel"><i class="fa fa-remove"></i></button>
            <% } %>
          </span>
          <h3 class="timeline-header">
            <a href="#" name="nodeCommandDetails" data-index="<%= index %>" class="text-capitalize"><%= command.type %> <%= command.action %></a>
          </h3>
        </div>
      </li>
    <% } %>

    <% if (commands.length === 0) { %>
    <li class="time-label">
      <span class="bg-blue">No Commands</span>
    </li>
    <% } %>

    <li>
      <i class="fa fa-circle"></i>
    </li>
  </ul>

</div>

